## Авторизация

Первый шаг - отправка запроса на /api/\<version\>/login.
В качестве параметров должны быть переданы логин и пароль.

Единственная цель контроллера авторизации - вернуть токен.
Непосредственно сам доступ к контроллеру контроллируют фильтры.

В качестве ответа будет использован токен авторизации.
Если он уже существовал, вернется новый токен, старый будет инвалидирован.
Токен автоматически инвалидируется через 7 дней.

Для создания и получения информации о токене используется TokenRepository

 -------
Доступ к остальным частям контроллируется через аннотации @PreAuthentication.

В запросе к любому ресурсу должен присутствовать заголовок X_AUTHENTICATION_TOKEN.

Для контроля используется фильтр TokenProcessingFilter.
Он оборачивает токен в Authentication и отправляет в Provider Manager.
Один из AuthenticationProvider'ов будет TokenProcessingAuthenticationProvider.

Он преобразует токен в логин через TokenRepository, потом в User через InMemoryUserDetailsManager.
Затем он заполняет Authentication полями из User и возвращает его.